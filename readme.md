# Sandbox Discord Bot

## OverView
総合TRPG鯖「Sandbox」で利用しているdiscord上でのオンラインセッションをサポートする為のdiscord-Botです。

## GitHubに含まれないもの
|ファイル名|内容|
|:-|:-|
|bot_option.json|BotのトークンやサーバのID、CHのIDを記述するファイルです。ファイルの内容は.\sandboxbot\read_bot_param.py参照。|
|google_calendar_id.json|GoogleCalenderのIDとOath認証ファイルのパスを記述するJSONファイルです。ファイルの内容は.\sandboxbot\google_calendar.py参照。|
|token.pickle|GoogleCalendarのOath認証データを保存したファイルです。作成方法は.\sandboxbot\google_calendar.py参照。また、作成時に使用するプログラムは.\GoogleCalendarApiOath\GoogleApiOath認証作成.py。|
|.\randam_table|TRPGに使用する各種ランダム表を格納するディレクトリです。著作権の関係でアップできない為自作してください。|

## 開発環境
|項目|内容|
|:-|:-|
|Python|Ver. 3.7.3|
|APIラッパー|discord.py ver 1.0.1(write版)|
|コーディング規約|coding_rule.py参照。|

## 機能一覧
### TRPGセッション管理機能
#### TRPGセッション管理機能(1) 募集文ピン留め機能
|イベント|処理|
|:-|:-|
|TRPGセッションの募集を投稿時|セッション募集投稿文をピン留めする。|
|セッションの開催日時を過ぎた時|セッション募集投稿文のピン留めを解除する。|

#### TRPGセッション管理機能(2) Googleカレンダーとの連携機能
|イベント|処理|
|:-|:-|
|TRPGセッションの募集投稿文を投稿時|Googleカレンダーに予定を追加する。|
|TRPGセッションの募集投稿文を編集時|Googleカレンダーに予定を編集する。|
|TRPGセッションの募集投稿文を削除時|Googleカレンダーに予定を削除する。|

#### TRPGセッション管理機能(3) TRPGセッション参加/辞退管理機能
|イベント|処理|
|:-|:-|
|TRPGセッションの募集投稿文へリアクションを追加時|リアクションを追加したユーザへ「N月M日の卓に参加申請しました。」とメッセージを送信する。|
|TRPGセッションの募集投稿文へのリアクションを削除時|リアクションを削除したユーザへ「N月M日の卓の参加を辞退しました。」とメッセージを送信する。|

#### TRPGセッション管理機能(3) 卓一覧の表示機能
毎日00:00分頃、または$listコマンド送信時に、現在募集されている卓の一覧を表示する。
![$list_result](https://raw.githubusercontent.com/astasya/AgendaBot/Dep/list_commad_result.PNG) 

### サーバの便利機能
|コマンド|機能|
|:-|:-|
|$list |卓の予定の一覧を特定のチャンネルに表示する。|
|$useful_link |便利なサイトの一覧を出力する。|

### TRPGを遊ぶ
|コマンド|機能|
|:-|:-|
|$dice_help|ダイスを振る機能についてのヘルプを表示する。|
|$sw_help|SW2.0/2.5 キャラクター作成支援機能についてのヘルプを表示する。|
|$coc_help|CoC キャラクター作成支援機能についてのヘルプを表示する。|
|$dx3rd_help|DX3rd キャラクター作成支援機能についてのヘルプを表示する。|

### TRPGを遊ぶ(1) ダイスを振る機能
|コマンド|機能|
|:-|:-|
|$[整数]d[整数] |ダイスを振った結果を表示する。|
|$s[整数]d[整数] |ダイスを降った結果を昇順で表示する。期待値を表示する。

### TRPGを遊ぶ(2) SW2.0/2.5 キャラクター作成支援機能
 |コマンド|機能|
 |:-|:-|
 |$sw_[整数]|種族の初期値を3回生成し、結果を表示する。|
 |$sw_race_[整数]|種族の初期値を3回生成し、結果を表示する。|
 |$sw_ab|アビス強化表を振った結果を表示する。|
 |$sw_ca[無しor整数]|整数の数だけ経歴表を振り、結果を表示する。|
 |$sw_re|冒険に出た理由表を振った結果を表示する。|

  $sw_[整数]、$sw_race_[整数]コマンドの整数と種族の対応は以下の通り。  
  
 |値|種族|値|種族|値|種族|値|種族|
 |:-|:-|:-|:-|:-|:-|:-|:-|
 |0|人間|3|タビット|6|リカント|9|メリア|
 |1|エルフ|4|ルーンフォーク|7|リルドラケン|10|ティエンス|
 |2|ドワーフ|5|ナイトメア|8|グラスランナー|11|レプラカーン|

### TRPGを遊ぶ(3) CoC キャラクター作成支援機能
 |コマンド|機能|
 |:-|:-|
 |$coc_stat|探索者の初期値を3回生成し、結果を表示する。|

### TRPGを遊ぶ(4) DX3rd キャラクター作成支援機能
 |コマンド|機能|
 |:-|:-|
 |$dx3rd_moth|邂逅表を振り、結果を表示する。|
